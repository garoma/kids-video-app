<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Divisor de V√≠deos - KidsTube</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 800px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        h1 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 2.5rem;
            text-align: center;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1rem;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 1.1rem;
        }
        
        input[type="file"],
        input[type="number"],
        select {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        input[type="file"]:hover,
        input[type="number"]:hover,
        select:hover {
            border-color: #667eea;
        }
        
        input[type="file"]:focus,
        input[type="number"]:focus,
        select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 18px 40px;
            font-size: 1.2rem;
            font-weight: 600;
            border-radius: 10px;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
            margin-top: 10px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .info-box {
            background: #f0f4ff;
            border-left: 4px solid #667eea;
            padding: 20px;
            border-radius: 10px;
            margin: 25px 0;
        }
        
        .info-box h3 {
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .info-box p {
            color: #555;
            line-height: 1.6;
            margin-bottom: 8px;
        }
        
        .video-preview {
            margin: 25px 0;
            text-align: center;
        }
        
        .video-preview video {
            max-width: 100%;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .progress-container {
            display: none;
            margin: 25px 0;
        }
        
        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            width: 0%;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }
        
        .resultado {
            display: none;
            background: #e8f5e9;
            border: 2px solid #4caf50;
            padding: 20px;
            border-radius: 10px;
            margin-top: 25px;
        }
        
        .resultado h3 {
            color: #2e7d32;
            margin-bottom: 15px;
        }
        
        .resultado ul {
            list-style: none;
        }
        
        .resultado li {
            padding: 10px;
            background: white;
            margin-bottom: 10px;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .download-btn {
            background: #4caf50;
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
        }
        
        .download-btn:hover {
            background: #45a049;
        }
        
        .error {
            background: #ffebee;
            border: 2px solid #f44336;
            color: #c62828;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé¨ Divisor de V√≠deos</h1>
        <p class="subtitle">Divida seus v√≠deos em clipes pequenos para o KidsTube</p>
        
        <div class="info-box">
            <h3>‚ÑπÔ∏è Como usar:</h3>
            <p><strong>1.</strong> Escolha um arquivo de v√≠deo (MP4, MOV, AVI, etc.)</p>
            <p><strong>2.</strong> Defina a dura√ß√£o de cada clipe (em segundos)</p>
            <p><strong>3.</strong> Escolha a categoria do v√≠deo</p>
            <p><strong>4.</strong> Clique em "Dividir V√≠deo" e aguarde o processamento</p>
            <p><strong>5.</strong> Baixe os clipes gerados!</p>
        </div>
        
        <form id="videoForm">
            <div class="form-group">
                <label for="videoFile">üìÅ Selecione o v√≠deo:</label>
                <input type="file" id="videoFile" accept="video/*" required>
            </div>
            
            <div class="video-preview" id="videoPreview" style="display: none;">
                <video id="previewVideo" controls></video>
                <p id="videoInfo" style="margin-top: 10px; color: #666;"></p>
            </div>
            
            <div class="form-group">
                <label for="clipDuration">‚è±Ô∏è Dura√ß√£o de cada clipe (segundos):</label>
                <input type="number" id="clipDuration" min="5" max="300" value="30" required>
                <small style="color: #666; display: block; margin-top: 5px;">
                    Recomendado: 15-60 segundos para crian√ßas
                </small>
            </div>
            
            <div class="form-group">
                <label for="categoria">üéØ Categoria do v√≠deo:</label>
                <select id="categoria" required>
                    <option value="">Selecione uma categoria</option>
                    <option value="animais">üêæ Animais</option>
                    <option value="desenhos">üé® Desenhos</option>
                    <option value="musica">üéµ M√∫sica</option>
                    <option value="ciencia">üî¨ Ci√™ncia</option>
                    <option value="historias">üìö Hist√≥rias</option>
                    <option value="brincadeiras">üéÆ Brincadeiras</option>
                </select>
            </div>
            
            <button type="submit" class="btn" id="submitBtn">
                Dividir V√≠deo
            </button>
        </form>
        
        <div class="error" id="errorMsg"></div>
        
        <div class="progress-container" id="progressContainer">
            <h3 style="margin-bottom: 15px; color: #667eea;">Processando v√≠deo...</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill">0%</div>
            </div>
            <p id="progressText" style="text-align: center; margin-top: 10px; color: #666;"></p>
        </div>
        
        <div class="resultado" id="resultado">
            <h3>‚úÖ V√≠deo dividido com sucesso!</h3>
            <p style="margin-bottom: 15px; color: #555;">
                <strong id="totalClips">0</strong> clipes foram gerados
            </p>
            <ul id="clipsList"></ul>
            <button class="btn" onclick="location.reload()" style="margin-top: 15px; background: #667eea;">
                Dividir Outro V√≠deo
            </button>
        </div>
    </div>
    
    <script>
        const videoFileInput = document.getElementById('videoFile');
        const previewVideo = document.getElementById('previewVideo');
        const videoPreview = document.getElementById('videoPreview');
        const videoInfo = document.getElementById('videoInfo');
        const videoForm = document.getElementById('videoForm');
        const progressContainer = document.getElementById('progressContainer');
        const progressFill = document.getElementById('progressFill');
        const progressText = document.getElementById('progressText');
        const resultado = document.getElementById('resultado');
        const clipsList = document.getElementById('clipsList');
        const totalClips = document.getElementById('totalClips');
        const errorMsg = document.getElementById('errorMsg');
        const submitBtn = document.getElementById('submitBtn');
        
        let videoFile = null;
        let videoDuration = 0;
        
        // Preview do v√≠deo
        videoFileInput.addEventListener('change', (e) => {
            videoFile = e.target.files[0];
            if (videoFile) {
                const url = URL.createObjectURL(videoFile);
                previewVideo.src = url;
                videoPreview.style.display = 'block';
                
                previewVideo.addEventListener('loadedmetadata', () => {
                    videoDuration = previewVideo.duration;
                    const minutes = Math.floor(videoDuration / 60);
                    const seconds = Math.floor(videoDuration % 60);
                    videoInfo.textContent = `Dura√ß√£o total: ${minutes}min ${seconds}s`;
                });
            }
        });
        
        // Processar formul√°rio
        videoForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            if (!videoFile) {
                showError('Por favor, selecione um v√≠deo!');
                return;
            }
            
            const clipDuration = parseInt(document.getElementById('clipDuration').value);
            const categoria = document.getElementById('categoria').value;
            
            if (!categoria) {
                showError('Por favor, selecione uma categoria!');
                return;
            }
            
            // Calcular n√∫mero de clipes
            const numClips = Math.ceil(videoDuration / clipDuration);
            
            if (numClips > 50) {
                showError('O v√≠deo √© muito longo! Use clipes maiores ou um v√≠deo mais curto.');
                return;
            }
            
            // Simular processamento (em produ√ß√£o, isso seria feito no backend com FFmpeg)
            await processarVideo(numClips, clipDuration, categoria);
        });
        
        async function processarVideo(numClips, clipDuration, categoria) {
            // Esconder formul√°rio e mostrar progresso
            videoForm.style.display = 'none';
            progressContainer.style.display = 'block';
            errorMsg.style.display = 'none';
            
            const clips = [];
            
            for (let i = 0; i < numClips; i++) {
                // Simular processamento
                await sleep(500);
                
                const progress = Math.round(((i + 1) / numClips) * 100);
                progressFill.style.width = progress + '%';
                progressFill.textContent = progress + '%';
                progressText.textContent = `Processando clipe ${i + 1} de ${numClips}...`;
                
                // Criar dados do clipe
                const startTime = i * clipDuration;
                const endTime = Math.min((i + 1) * clipDuration, videoDuration);
                const clipName = `${categoria}_clip_${i + 1}.mp4`;
                
                clips.push({
                    nome: clipName,
                    inicio: formatTime(startTime),
                    fim: formatTime(endTime),
                    duracao: formatTime(endTime - startTime)
                });
            }
            
            // Mostrar resultado
            setTimeout(() => {
                progressContainer.style.display = 'none';
                mostrarResultado(clips, categoria);
            }, 500);
        }
        
        function mostrarResultado(clips, categoria) {
            totalClips.textContent = clips.length;
            clipsList.innerHTML = '';
            
            clips.forEach((clip, index) => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <div>
                        <strong>${clip.nome}</strong><br>
                        <small style="color: #666;">
                            ${clip.inicio} ‚Üí ${clip.fim} (${clip.duracao})
                        </small>
                    </div>
                    <button class="download-btn" onclick="alert('Em produ√ß√£o, este bot√£o baixaria o clipe ${index + 1}')">
                        ‚¨áÔ∏è Baixar
                    </button>
                `;
                clipsList.appendChild(li);
            });
            
            resultado.style.display = 'block';
            
            // Instru√ß√µes
            const instrucoes = document.createElement('div');
            instrucoes.className = 'info-box';
            instrucoes.style.marginTop = '20px';
            instrucoes.innerHTML = `
                <h3>üìù Pr√≥ximos passos:</h3>
                <p>1. Baixe todos os clipes gerados</p>
                <p>2. Coloque-os na pasta: <code>/videos/${categoria}/</code></p>
                <p>3. Atualize o arquivo <code>js/app.js</code> com os novos v√≠deos</p>
                <p>4. Divirta-se assistindo no KidsTube!</p>
            `;
            resultado.appendChild(instrucoes);
        }
        
        function showError(message) {
            errorMsg.textContent = '‚ùå ' + message;
            errorMsg.style.display = 'block';
            setTimeout(() => {
                errorMsg.style.display = 'none';
            }, 5000);
        }
        
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }
        
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
        
        console.log('üé¨ Divisor de V√≠deos carregado!');
    </script>
</body>
</html>